# -*- mode: sh -*-

if [ -f /usr/local/share/chruby/chruby.sh ]; then
    source /usr/local/share/chruby/chruby.sh

    # use ruby [version]
    use_ruby() {
        local ver=$1
        if [[ -z $ver ]] && [[ -f .ruby-version ]]; then
            ver=$(cat .ruby-version)
        fi
        if [[ -z $ver ]]; then
            echo Unknown ruby version
            exit 1
        fi
        chruby $ver
    }
fi

# use a certain pyenv version
use_python() {
    if [ -n "$(which pyenv)" ]; then
        local pyversion=$1
        pyenv local ${pyversion}
    fi
}

layout_virtualenv() {
    local pyversion=$1
    local pvenv=$2
    if [ ! -d $(pyenv root)/versions/${pvenv}-${pyversion} ]; then
        pyenv virtualenv --force --quiet ${pyversion} ${pvenv}-${pyversion}
    fi
    pyenv local --unset
}

layout_activate() {
    local pyversion=$1
    local pvenv=$2
    if [ -n "$(which pyenv)" ]; then
        source $(pyenv root)/versions/${pvenv}-${pyversion}/bin/activate
    fi
}
